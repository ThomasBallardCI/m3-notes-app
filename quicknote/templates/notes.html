{% extends "base.html" %}

<!-- page title block -->
{% block title %} Notes {% endblock %}

<!-- main page content block -->
{% block content %}
<div class="container">
    <h1 class="center-align">Welcome to your notes {{ user.first_name}}</h1>
    <div class="row">
        <div class="col s12 center-align">
            <a href="{{ url_for('add_note') }}" class="waves-effect waves-light btn-large">
                <i class="material-icons right">add</i>New Note</a>
        </div>
    </div>

    <div id="delete_note_modal" class="modal">
        <div class="modal-content">
            <h4>Confirmation Required</h4>
            <p>Are you sure you want to proceed? If you click "Agree," the note you want to delete will be permanently erased, and cannot be recovered.</p>
        </div>
        <div class="modal-footer">
            <input type="hidden" id="noteIdToDelete">
            <a class="btn red" id="agreeToDelete" href="{{ url_for('delete_note', note_id=note.id) }}">Agree</a>


        </div>
    </div>

    <ul class="collapsible popout">
        {% for note in notes %}
        <li>
            <div class="collapsible-header">
                <i class="material-icons">keyboard_arrow_down</i>
                <strong>{{ note.note_title }}</strong>
                <div class="date-right">
                    {% if note.note_date %}
                    <p>{{ note.note_date.strftime('%d/%m/%Y') }}</p>
                    {% endif %}
                </div>
            </div>
            <div class="collapsible-body">
                <p>{{ note.note_content }}</p>
                <a href="{{ url_for('edit_note', note_id=note.id) }}" class="btn green accent-4">Edit</a>
                <a class="waves-effect waves-light btn modal-trigger red delete-button" href="#delete_note_modal" data-note-id="{{ note.id }}">Delete</a>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}